@{
    Layout = "~/Shared/_Layout.cshtml";
    Page.Title = "Examendata";

    string action = "";

    Session["Page"] = "4";

    Session["loginError"] = "";
    if (IsPost)
    {
        action = Request["action"];

        switch (action)
        {
            case "login":
                if (Session["cursist"] == null)
                {
                    try
                    {
                        
                        Session["cursist"] = Administratix.Model.Cursist.Login(Request["Login-CursistNummer"]);
                    }
                    catch (Exception e)
                    {

                        Session["loginError"] = e.Message;
                    }

                }
                break;

            case "logout":
                Session["cursist"] = null;
                break;

        }
    }

    if (Session["cursist"] == null)
    {
        Response.Redirect("~/Deelpagina's/Default.cshtml");
    }

    //Dit is om nederlandse weekdagen te krijgen
    System.Globalization.CultureInfo culture = new System.Globalization.CultureInfo("nl-BE");

    string message = "Alles gaat goed";

    List<Administratix.BLL.ModuleExamenData> moduleExamenDataLijst = new List<Administratix.BLL.ModuleExamenData>();

    if (Session["cursist"] != null)
    {
        Administratix.BLL.Cursist cursist = (Administratix.BLL.Cursist)Session["cursist"];
        moduleExamenDataLijst = Administratix.Model.ModuleExamenData.ModuleExamenDatumsSelectAllByCursistNummer(Convert.ToInt32(cursist.CursistNummer));

        //if (action.Equals("feestdagen-toevoegen"))
        //{
        //    feestDagen = Administratix.Model.Kalender.KalenderSelectAll();
        //    lessenRooster = Administratix.Model.LesDavinci.LesDavinciSelectAllByCursistNummerWithVakantieDagen(lessenRooster, feestDagen);
        //}
    }
    
}


        <form id="moduleExamenData-display" action="" method="post">
            <fieldset>
                <legend>Display opties</legend>
                <button type="submit" name="action" value="display-compact">Compact Test</button>
            </fieldset>
        </form>

        @if (action.Equals("display-compact"))
        {

            <div class="containerBig">
                <div class="containerCalendarRow">
                    <div class="containerCalendarTitle columnMed">
                        Cursusnummer
                    </div>
                    <div class="containerCalendarTitle columnBig">
                        Module
                    </div>
                    <div class="containerCalendarTitle columnMed">
                        1ste zittijd
                    </div>
                    <div class="containerCalendarTitle columnMed">
                        Deliberatiedatum
                    </div>
                    <div class="containerCalendarTitle columnMed">
                        2de zittijd
                    </div>
                </div>

                @for (int i = 0; i < moduleExamenDataLijst.Count; i++)
                {
                    Administratix.BLL.ModuleExamenData module = moduleExamenDataLijst[i];
                    <div class="containerCalendarRow @(i%2 == 0 ? "":"shaded")">
                        <div class="containerCalendarColumn columnMed">
                            @module.CursusNummer
                        </div>
                        <div class="containerCalendarColumn columnBig">
                            @module.Naam
                        </div>
                        <div class="containerCalendarColumn columnMed">
                            @if (module.ExamenDatum.GetHashCode() == 0)
                            {
                                <p>Niet bekend</p>
                            }
                            else
                            {
                                @module.ExamenDatum.ToString("dd-MM-yyyy HH:mm", culture)
                            }
                        </div>
                        <div class="containerCalendarColumn columnMed">
                            @if (module.DeliberatieDatum.GetHashCode() == 0)
                            {
                                <p>Niet bekend</p>
                            }
                            else
                            {
                                @module.DeliberatieDatum.ToString("dd-MM-yyyy HH:mm", culture)
                            }
                        </div>
                        <div class="containerCalendarColumn columnMed">
                            @if (module.DatumTweedeZit.GetHashCode() == 0)
                            {
                                <p>Niet bekend</p>
                            }
                            else
                            {
                                @module.DatumTweedeZit.ToString("dd-MM-yyyy HH:mm", culture)
                            }
                        </div>
                    </div>

                }
                
            </div>
        }
        else
        {
            <div class="containerBig">
                <div class="containerCalendarRow">
                    <div class="containerCalendarTitle columnMed">
                        Cursusnummer
                    </div>
                    <div class="containerCalendarTitle columnMed">
                        Aanvangsdatum
                    </div>
                    <div class="containerCalendarTitle columnMed">
                        Einddatum
                    </div>
                    <div class="containerCalendarTitle columnBig">
                        Module
                    </div>
                    <div class="containerCalendarTitle columnMed">
                        1ste zittijd
                    </div>
                    <div class="containerCalendarTitle columnMed">
                        Deliberatiedatum
                    </div>
                    <div class="containerCalendarTitle columnMed">
                        2de zittijd
                    </div>
                </div>

                @for (int i = 0; i < moduleExamenDataLijst.Count; i++)
                {
                    Administratix.BLL.ModuleExamenData module = moduleExamenDataLijst[i];
                    <div class="containerCalendarRow @(i%2 == 0 ? "":"shaded")">
                        <div class="containerCalendarColumn columnMed">
                            @module.CursusNummer
                        </div>
                        <div class="containerCalendarColumn columnMed">
                            @if (module.AanvangsDatum.GetHashCode() == 0)
                            {
                                <p>Niet bekend</p>
                            }
                            else
                            {
                                @module.AanvangsDatum.ToString("dd-MM-yyyy", culture)
                            }
                        </div>
                        <div class="containerCalendarColumn columnMed">
                            @if (module.EindDatum.GetHashCode() == 0)
                            {
                                <p>Niet bekend</p>
                            }
                            else
                            {
                                @module.EindDatum.ToString("dd-MM-yyyy", culture)
                            }
                        </div>
                        <div class="containerCalendarColumn columnBig">
                            @module.Naam
                        </div>
                        <div class="containerCalendarColumn columnMed">
                            @if (module.ExamenDatum.GetHashCode() == 0)
                            {
                                <p>Niet bekend</p>
                            }
                            else
                            {
                                @module.ExamenDatum.ToString("dd-MM-yyyy HH:mm", culture)
                            }
                        </div>
                        <div class="containerCalendarColumn columnMed">
                            @if (module.DeliberatieDatum.GetHashCode() == 0)
                            {
                                <p>Niet bekend</p>
                            }
                            else
                            {
                                @module.DeliberatieDatum.ToString("dd-MM-yyyy HH:mm", culture)
                            }
                        </div>
                        <div class="containerCalendarColumn columnMed">
                            @if (module.DatumTweedeZit.GetHashCode() == 0)
                            {
                                <p>Niet bekend</p>
                            }
                            else
                            {
                                @module.DatumTweedeZit.ToString("dd-MM-yyyy HH:mm", culture)
                            }
                        </div>
                    </div>

                }
            </div>
        }

